To solve the problem of finding the median of a list, we need to follow these steps:

1. Sort the list.
2. Determine if the number of elements in the list is odd or even.
3. If the number of elements is odd, return the middle element.
4. If the number of elements is even, return the average of the two middle elements.

Here's the implementation of the `median` function:

```python
def median(l: list):
    """Return median of elements in the list l."""
    if not l:
        raise ValueError("List is empty")
    
    sorted_l = sorted(l)
    n = len(sorted_l)
    
    if n % 2 == 1:
        return sorted_l[n // 2]
    else:
        mid1, mid2 = sorted_l[n // 2 - 1], sorted_l[n // 2]
        return (mid1 + mid2) / 2
```

This function first checks if the list is empty and raises a `ValueError` if it is. It then sorts the list and calculates the median based on whether the number of elements is odd or even.